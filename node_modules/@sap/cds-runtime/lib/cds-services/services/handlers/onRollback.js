module.exports = context => {
  const map = context._.shared.connections && context._.shared.connections.get(context._txId)
  if (!map) {
    return null
  }

  // REVISIT: how to handle some rollbacks fail?
  const rollbacks = []
  for (const tx of map.values()) {
    rollbacks.push(tx.rollback())
  }
  return Promise.all(rollbacks)
}
