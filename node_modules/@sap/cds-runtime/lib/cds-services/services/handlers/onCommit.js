module.exports = context => {
  const map = context._.shared.connections && context._.shared.connections.get(context._txId)
  if (!map) {
    return null
  }

  // REVISIT: how to handle some commits fail?
  const commits = []
  for (const tx of map.values()) {
    commits.push(tx.commit(true))
  }
  return Promise.all(commits)
}
