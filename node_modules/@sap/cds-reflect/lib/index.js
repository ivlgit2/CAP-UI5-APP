const { extend, lazify } = require ('./core/utilities')
const core = new class cds extends require('events'){}
const c = lazy => cds.builtin.classes [lazy]
require = lazify(module)  // eslint-disable-line

const cds = module.exports = { __proto__:core,

	// Builtin types and classes
	builtin: require ('./core/csn'),
	Association:c, Composition:c,
	service:c, context:c,
	entity:c,
	struct:c,
	type:c,
	array:c,

	// Reflection
	reflect: require ('./core/reflect'),
	linked: require ('./core/linked'),
	infer: require ('./ql/infer'),
	ql: require ('./ql'),

	// Core Runtime
	// Service: require ('./srv/service'),
  // Request: require ('./srv/request'),
  // User: require ('./srv/user'),

	// Helpers
	lazified:lazify, lazify, extend,
	clone: m => JSON.parse (JSON.stringify(m)),

}
